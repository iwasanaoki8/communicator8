%header.sticky-top
  .d-flex.justify-content-between.align-items-center
    %a.app-name{href: "/"} Communicator
    %ul.navbar-nav
      .header-right
        - if user_signed_in?
          %li
            %a.d-block.dropdown-toggle.text-dark{ href: "#", "data-bs-toggle": "dropdown", "aria-expanded": "false"}
              - if user_signed_in? && current_user.avatar.attached?
                = image_tag current_user.avatar, style: "width: 40px; height: 40px; border-radius: 50%; object-fit: cover; box-shadow: 0px 0px 4px 0px rgba(145, 143, 143, 0.75);"
              - else
                = image_tag 'default_avatar.png', style: "width: 32px; height: 32px; border-radius: 50%; object-fit: cover; box-shadow: 0px 0px 4px 0px rgba(145, 143, 143, 0.75);"
            %ul.header-menu.dropdown-menu.shadow.dropdown-menu-end.mx-2
              %li
                %a.dropdown-item{ href: user_path(current_user) } 
                  = current_user.user_name
              %li
                %hr.dropdown-divider
              %li
                %a.dropdown-item{:href => "https://ovdss.com/iapps/html_to_haml"} 
                  About
              %li
                %a.dropdown-item{href: communities_path} 
                  Communities
              %li
                %a.dropdown-item{href: new_community_path}
                  New Community

              %li
                %a.dropdown-item{ href: profile_setting_path } 
                  ユーザー設定
              %li
                %a.dropdown-item{href: destroy_user_session_path, data: {turbo_method: :delete}} 
                  ログアウト

        - else
          %ul.navbar-nav
            .d-flex
              %li.nav-item.mx-2
                %a.nav-link{href: new_user_registration_path} 
                  sign_up
              %li.nav-item.mx-2
                %a.nav-link{href: new_user_session_path , :tabindex => "-1"} 
                  login

