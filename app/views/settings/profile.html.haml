%main.container
  .profile-container
    .row.mt-4
      .col-md-8.mb-3.profile-editor
        = simple_form_for @user, url: setting_path, html: { class: 'form-setting ', multipart: true }, data: {turbo: false} do |f|
          .avatar-upload{data: {controller: "preview-avatar"}}
            = f.input :avatar, as: :file, label: false, input_html: { class: 'form-control avatar-input', id: 'avatarInput', data: { preview_avatar_target: "input" } }
            - if @user.avatar.attached?
              = image_tag(@user.avatar, class: 'img-thumbnail mb-3 avatar-img', data: { preview_avatar_target: "img" })
            - else
              = image_tag 'default_avatar.png', class: 'img-thumbnail mb-3 avatar-img', data: { preview_avatar_target: "img" }
          = f.input :user_name, required: true, autofocus: true, input_html: { class: 'form-control stylish-input mb-5' }, label: icon_with_attr(:user, :user_name)
          = f.simple_fields_for :profile do |pf|
            = pf.input :job_title, input_html: { class: 'form-control stylish-input mb-5' }, label: icon_with_attr(:profile, :job_title)
            = pf.input :years_of_experience,collection: @user.years_of_experience_collection, input_html: { class: 'form-control stylish-input mb-5' }, label: icon_with_attr(:profile, :years_of_experience)
            = pf.input :company, input_html: { class: 'form-control stylish-input mb-5' }, label: icon_with_attr(:profile, :company)
            = pf.input :birthday, as: :date, start_year: Date.today.year - 100, end_year: Date.today.year, input_html: { class: 'form-control stylish-input mb-5' }, label: icon_with_attr(:profile, :birthday)
            = pf.input :biography, input_html: { class: 'form-control stylish-input mb-5', style: "height: 200px;" }, label: icon_with_attr(:profile, :biography)
              
          .text-center
            = f.button :submit, 'プロフィールを更新する', class: 'btn zozo-button'
      .col-md-4.mb-3
        = render 'link_list'

